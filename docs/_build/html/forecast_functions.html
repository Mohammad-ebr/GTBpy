

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>forecast_functions module &mdash; GTBpy Documentation 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="google_trends_functions module" href="google_trends_functions.html" />
    <link rel="prev" title="bubble_indicators module" href="bubble_indicators.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GTBpy Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">GTBpy</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bubble_indicators.html">bubble_indicators module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">forecast_functions module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.lags_list_function"><code class="docutils literal notranslate"><span class="pre">lags_list_function()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.result_table"><code class="docutils literal notranslate"><span class="pre">result_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.compute_ic_cv"><code class="docutils literal notranslate"><span class="pre">compute_ic_cv()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.lag_selector"><code class="docutils literal notranslate"><span class="pre">lag_selector()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.model"><code class="docutils literal notranslate"><span class="pre">model()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.compare_exog"><code class="docutils literal notranslate"><span class="pre">compare_exog()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.HLN_MDM"><code class="docutils literal notranslate"><span class="pre">HLN_MDM()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.forecast_table"><code class="docutils literal notranslate"><span class="pre">forecast_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#forecast_functions.results"><code class="docutils literal notranslate"><span class="pre">results()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="google_trends_functions.html">google_trends_functions module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GTBpy Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">GTBpy</a></li>
      <li class="breadcrumb-item active">forecast_functions module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/forecast_functions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-forecast_functions">
<span id="forecast-functions-module"></span><h1>forecast_functions module<a class="headerlink" href="#module-forecast_functions" title="Link to this heading"></a></h1>
<p>Functions are used to forecaset House Price Index (HPI) using ARX model.</p>
<p>It includes two forecast performance evaluation test:
- Testing the equality of prediction mean squared errors: David I. Harvey, Stephen J. Leybourne, Paul Newbold (1997)
- Tests for Forecast Encompassing: David I. Harvey, Stephen J. Leybourne, Paul Newbold (1998)</p>
<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.lags_list_function">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">lags_list_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lags</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#lags_list_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.lags_list_function" title="Link to this definition"></a></dt>
<dd><p>Generate a list of lag combinations based on the specified <cite>lags</cite> parameter and maximum lag value.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>lags<span class="classifier">{‘Auto’, ‘glob’, list of int}</span></dt><dd><p>Determines the type of lag combinations to generate:
- ‘Auto’: Automatically generates sequential lags up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Uses the specified list of lags directly.</p>
</dd>
<dt>max_lag<span class="classifier">int</span></dt><dd><p>The maximum lag value to consider when generating lag combinations.</p>
</dd>
</dl>
</section>
<section id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>lags_list<span class="classifier">list of list of int</span></dt><dd><p>A list where each element is a list of integers representing a combination
of lag values. The specific combinations depend on the input <cite>lags</cite> parameter.</p>
</dd>
</dl>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lags_list_function</span><span class="p">(</span><span class="s1">&#39;Auto&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">[[], [1], [1, 2], [1, 2, 3]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lags_list_function</span><span class="p">(</span><span class="s1">&#39;glob&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">[[], [1], [2], [1, 2]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lags_list_function</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">[[1, 2]]</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.result_table">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">result_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'None'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#result_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.result_table" title="Link to this definition"></a></dt>
<dd><p>Create a multi-indexed DataFrame with specified index and column headers.</p>
<section id="id1">
<h2>Parameters<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>index<span class="classifier">list of str</span></dt><dd><p>A list of labels for the DataFrame’s index.</p>
</dd>
<dt>header<span class="classifier">str</span></dt><dd><p>The header label for the DataFrame’s columns.</p>
</dd>
<dt>h_list<span class="classifier">list of int</span></dt><dd><p>A list of integers that will be appended to the header label to create the column names.</p>
</dd>
<dt>index_name<span class="classifier">str</span></dt><dd><p>The name to assign to the DataFrame’s index.</p>
</dd>
<dt>first_index<span class="classifier">str, optional</span></dt><dd><p>The label for the first index position. Defaults to ‘None’.</p>
</dd>
</dl>
</section>
<section id="id2">
<h2>Returns<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame</span></dt><dd><p>A DataFrame with a MultiIndex for the columns, where the first level is the <cite>header</cite> and
the second level corresponds to ‘h=’ followed by each element in <cite>h_list</cite>. The DataFrame’s
index is set to the provided <cite>index</cite> list, with an optional <cite>first_index</cite> prepended.</p>
</dd>
</dl>
</section>
<section id="id3">
<h2>Examples<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result_table</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="s1">&#39;Metric&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;Category&#39;</span><span class="p">)</span>
<span class="go">    Metric          </span>
<span class="go">        h=1  h=2  h=3</span>
<span class="go">None   NaN   NaN   NaN</span>
<span class="go">A      NaN   NaN   NaN</span>
<span class="go">B      NaN   NaN   NaN</span>
<span class="go">C      NaN   NaN   NaN</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result_table</span><span class="p">([</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">],</span> <span class="s1">&#39;Value&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Start&#39;</span><span class="p">)</span>
<span class="go">    Value      </span>
<span class="go">        h=1  h=2</span>
<span class="go">Start   NaN   NaN</span>
<span class="go">X       NaN   NaN</span>
<span class="go">Y       NaN   NaN</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.compute_ic_cv">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">compute_ic_cv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv_criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MSFE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_intercept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#compute_ic_cv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.compute_ic_cv" title="Link to this definition"></a></dt>
<dd><p>Compute the information criterion (IC) or cross-validation (CV) score based on the specified metric and criteria.</p>
<section id="id4">
<h2>Parameters<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>y<span class="classifier">array-like or pandas.Series</span></dt><dd><p>The dependent variable vector (target).</p>
</dd>
<dt>X<span class="classifier">array-like or pandas.DataFrame</span></dt><dd><p>The independent variable matrix (features).</p>
</dd>
<dt>metric<span class="classifier">{‘CV’, ‘IC’}</span></dt><dd><p>The type of metric to compute:
- ‘CV’: Cross-validation metric based on the <cite>cv_criteria</cite>.
- ‘IC’: Information criterion (e.g., BIC).</p>
</dd>
<dt>cv_criteria<span class="classifier">{‘MSFE’, ‘MAFE’}, optional</span></dt><dd><p>The criterion used to compute the CV score when <cite>metric</cite> is ‘CV’:
- ‘MSFE’: Mean Squared Forecast Error (negative mean squared error).
- ‘MAFE’: Mean Absolute Forecast Error (negative mean absolute error).
Default is ‘MSFE’.</p>
</dd>
<dt>fit_intercept<span class="classifier">bool, optional</span></dt><dd><p>Whether to calculate the intercept for the linear model. If set to False, no intercept will be used in calculations. Default is True.</p>
</dd>
<dt>cv<span class="classifier">int, optional</span></dt><dd><p>The number of folds in cross-validation. Default is 5.</p>
</dd>
<dt>shuffle<span class="classifier">bool, optional</span></dt><dd><p>Whether to shuffle the data before splitting into batches in cross-validation. Default is False.</p>
</dd>
<dt>n_iter<span class="classifier">int, optional</span></dt><dd><p>The number of iterations for cross-validation when <cite>shuffle</cite> is True. Default is 20.</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>The random seed for reproducibility when shuffling data in cross-validation. Default is None.</p>
</dd>
</dl>
</section>
<section id="id5">
<h2>Returns<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>ic<span class="classifier">float</span></dt><dd><p>The computed information criterion (IC) or cross-validation (CV) score.</p>
</dd>
</dl>
</section>
<section id="id6">
<h2>Examples<a class="headerlink" href="#id6" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_ic_cv</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;CV&#39;</span><span class="p">,</span> <span class="n">cv_criteria</span><span class="o">=</span><span class="s1">&#39;MSFE&#39;</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">0.045</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compute_ic_cv</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;IC&#39;</span><span class="p">)</span>
<span class="go">210.34</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.lag_selector">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">lag_selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_select</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv_criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MSFE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">13</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cross'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exog_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seasonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#lag_selector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.lag_selector" title="Link to this definition"></a></dt>
<dd><p>Select optimal lags for the dependent and exogenous variables using information criteria (IC) or cross-validation (CV) metrics.</p>
<section id="id7">
<h2>Parameters<a class="headerlink" href="#id7" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame</span></dt><dd><p>The input DataFrame containing the time series data. The first column is assumed to be the dependent variable (‘y’).</p>
</dd>
<dt>lag_select<span class="classifier">{‘IC’, ‘CV’}</span></dt><dd><p>The metric used to select the optimal lags:
- ‘IC’: Information criterion (e.g., BIC).
- ‘CV’: Cross-validation score based on <cite>cv_criteria</cite>.</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>Random seed for reproducibility in cross-validation. Default is None.</p>
</dd>
<dt>cv_criteria<span class="classifier">{‘MSFE’, ‘MAFE’}, optional</span></dt><dd><p>The criterion used for cross-validation when <cite>lag_select</cite> is ‘CV’:
- ‘MSFE’: Mean Squared Forecast Error (default).
- ‘MAFE’: Mean Absolute Forecast Error.</p>
</dd>
<dt>cv<span class="classifier">int, optional</span></dt><dd><p>Number of folds for cross-validation. Default is 5.</p>
</dd>
<dt>shuffle<span class="classifier">bool, optional</span></dt><dd><p>Whether to shuffle the data before splitting into batches for cross-validation. Default is False.</p>
</dd>
<dt>n_iter<span class="classifier">int, optional</span></dt><dd><p>Number of iterations for cross-validation when <cite>shuffle</cite> is True. Default is 20.</p>
</dd>
<dt>h<span class="classifier">int, optional</span></dt><dd><p>Forecast horizon, indicating how many steps ahead the model is predicting. Default is 1.</p>
</dd>
<dt>max_lag<span class="classifier">int, optional</span></dt><dd><p>The maximum lag order to consider for selection. Default is 13.</p>
</dd>
<dt>exog<span class="classifier">str, optional</span></dt><dd><p>Name of the exogenous variable in the DataFrame. Default is None.</p>
</dd>
<dt>var_order<span class="classifier">{‘cross’, ‘nested’}, optional</span></dt><dd><p>The order in which lag selection is performed:
- ‘cross’: Cross all combinations of lags for ‘y’ and ‘exog’.
- ‘nested’: Select the best lags for ‘y’ first, then choose the best lags for ‘exog’ based on the selected ‘y’ lags. Default is ‘cross’.</p>
</dd>
<dt>y_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the dependent variable:
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>exog_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the exogenous variable, if applicable:
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>seasonal<span class="classifier">bool, optional</span></dt><dd><p>Whether to include seasonal dummies (monthly) in the model. Default is False.</p>
</dd>
<dt>verbose<span class="classifier">int, optional</span></dt><dd><p>If greater than 1, prints detailed information about the lag selection process. Default is 0.</p>
</dd>
</dl>
</section>
<section id="id8">
<h2>Returns<a class="headerlink" href="#id8" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>y_lags<span class="classifier">list of int</span></dt><dd><p>The optimal lags for the dependent variable (‘y’) based on the specified metric.</p>
</dd>
<dt>exog_lags<span class="classifier">list of int</span></dt><dd><p>The optimal lags for the exogenous variable based on the specified metric.</p>
</dd>
<dt>IC<span class="classifier">float</span></dt><dd><p>The minimum information criterion (IC) or cross-validation score obtained.</p>
</dd>
<dt>ics<span class="classifier">dict</span></dt><dd><p>A dictionary where keys are the IC/CV scores and values are the corresponding lags for ‘y’ and ‘exog’.</p>
</dd>
</dl>
</section>
<section id="id9">
<h2>Examples<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lag_selector_IC_CV</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lag_select</span><span class="o">=</span><span class="s1">&#39;CV&#39;</span><span class="p">,</span> <span class="n">cv_criteria</span><span class="o">=</span><span class="s1">&#39;MSFE&#39;</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">([1, 2, 3], [1], 0.034, {...})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lag_selector_IC_CV</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">lag_select</span><span class="o">=</span><span class="s1">&#39;IC&#39;</span><span class="p">,</span> <span class="n">exog</span><span class="o">=</span><span class="s1">&#39;ExogVar&#39;</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_lag</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">([1, 3], [1], 210.45, {...})</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.model">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seasonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'IC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exog_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cross'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_cut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_hpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.model" title="Link to this definition"></a></dt>
<dd><p>Fit an autoregressive exogenous (ARX) model with selected lags using information criteria (IC) or cross-validation (CV) for dependent and independent variables, and evaluate its performance.</p>
<section id="id10">
<h2>Parameters<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame</span></dt><dd><p>The input DataFrame containing the time series data. The first column is assumed to be the dependent variable (‘y’).</p>
</dd>
<dt>h<span class="classifier">int, optional</span></dt><dd><p>Forecast horizon, indicating how many steps ahead the model is predicting. Default is 1.</p>
</dd>
<dt>max_lag<span class="classifier">int, optional</span></dt><dd><p>The maximum lag order to consider for selection. Default is 3.</p>
</dd>
<dt>exog<span class="classifier">str, optional</span></dt><dd><p>Name of the exogenous variable in the DataFrame. Default is None.</p>
</dd>
<dt>seasonal<span class="classifier">bool, optional</span></dt><dd><p>Whether to include seasonal dummies (monthly) in the model. Default is False.</p>
</dd>
<dt>lag_select<span class="classifier">{‘IC’, ‘CV’}, optional</span></dt><dd><p>The metric used to select the optimal lags:
- ‘IC’: Information criterion (e.g., BIC).
- ‘CV’: Cross-validation score based on <cite>cv_criteria</cite>. Default is ‘IC’.</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>Random seed for reproducibility in cross-validation. Default is None.</p>
</dd>
<dt>cv<span class="classifier">int, optional</span></dt><dd><p>Number of folds for cross-validation. Default is 5.</p>
</dd>
<dt>shuffle<span class="classifier">bool, optional</span></dt><dd><p>Whether to shuffle the data before splitting into batches for cross-validation. Default is False.</p>
</dd>
<dt>n_iter<span class="classifier">int, optional</span></dt><dd><p>Number of iterations for cross-validation when <cite>shuffle</cite> is True. Default is 20.</p>
</dd>
<dt>y_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the dependent variable:
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>exog_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the exogenous variable, if applicable:
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>var_order<span class="classifier">{‘cross’, ‘nested’}, optional</span></dt><dd><p>The order in which lag selection is performed:
- ‘cross’: Cross all combinations of lags for ‘y’ and ‘exog’.
- ‘nested’: Select the best lags for ‘y’ first, then choose the best lags for ‘exog’ based on the selected ‘y’ lags. Default is ‘cross’.</p>
</dd>
<dt>train_cut<span class="classifier">float or str or datetime-like, optional</span></dt><dd><p>The cutoff point for splitting the data into training and validation sets. Can be a float between 0 and 1 representing the proportion of the data to use for training, or a specific index value. Default is 0.8.</p>
</dd>
<dt>verbose<span class="classifier">int, optional</span></dt><dd><p>Level of verbosity for debugging or detailed output. Default is 0.</p>
</dd>
<dt>log<span class="classifier">bool, optional</span></dt><dd><p>If True, the data is assumed to be log-transformed and predictions will be back-transformed. Default is False.</p>
</dd>
<dt>plot<span class="classifier">bool, optional</span></dt><dd><p>If True, plots the actual vs. predicted values with a vertical line indicating the training/validation split. Default is False.</p>
</dd>
<dt>original_hpi<span class="classifier">pandas.Series, optional</span></dt><dd><p>Original HPI (Housing Price Index) values for back-transforming predictions. Only used if <cite>original_scale</cite> is True. Default is None.</p>
</dd>
<dt>original_scale<span class="classifier">bool, optional</span></dt><dd><p>Whether to return the predictions on the original scale (before any transformations). Default is True.</p>
</dd>
</dl>
</section>
<section id="id11">
<h2>Returns<a class="headerlink" href="#id11" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>MAFE_val<span class="classifier">float</span></dt><dd><p>Mean Absolute Forecast Error on the validation set.</p>
</dd>
<dt>MSFE_val<span class="classifier">float</span></dt><dd><p>Mean Squared Forecast Error on the validation set.</p>
</dd>
<dt>MAFE_train<span class="classifier">float</span></dt><dd><p>Mean Absolute Forecast Error on the training set.</p>
</dd>
<dt>MSFE_train<span class="classifier">float</span></dt><dd><p>Mean Squared Forecast Error on the training set.</p>
</dd>
<dt>lags_set<span class="classifier">dict</span></dt><dd><p>Dictionary containing the selected lags for ‘y’ and ‘exog’.</p>
</dd>
<dt>IC<span class="classifier">float</span></dt><dd><p>The minimum information criterion (IC) or cross-validation score obtained during lag selection.</p>
</dd>
<dt>res_full<span class="classifier">pandas.Series</span></dt><dd><p>The full set of predictions for the dependent variable, including both training and validation periods.</p>
</dd>
</dl>
</section>
<section id="id12">
<h2>Examples<a class="headerlink" href="#id12" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MAFE_val</span><span class="p">,</span> <span class="n">MSFE_val</span><span class="p">,</span> <span class="n">MAFE_train</span><span class="p">,</span> <span class="n">MSFE_train</span><span class="p">,</span> <span class="n">lags_set</span><span class="p">,</span> <span class="n">IC</span><span class="p">,</span> <span class="n">res_full</span> <span class="o">=</span> <span class="n">model_IC_CV</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">max_lag</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">exog</span><span class="o">=</span><span class="s1">&#39;ExogVar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">MAFE_val</span><span class="p">,</span> <span class="n">MSFE_val</span><span class="p">,</span> <span class="n">lags_set</span><span class="p">)</span>
<span class="go">0.034 0.002 {&#39;y lags&#39;: [1, 2], &#39;exog lags&#39;: [1]}</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.compare_exog">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">compare_exog</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_cut</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">6,</span> <span class="pre">12]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seasonal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'IC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_fit_intercept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hsi_CV_select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hsi_fit_intercept</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hsi_cv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hsi_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exog_lags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">var_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cross'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_hpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'criteria'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#compare_exog"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.compare_exog" title="Link to this definition"></a></dt>
<dd><p>Compare the impact of different exogenous variables on forecasting accuracy using various evaluation metrics.</p>
<section id="id13">
<h2>Parameters<a class="headerlink" href="#id13" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>df<span class="classifier">pandas.DataFrame</span></dt><dd><p>The input DataFrame containing the time series data. The first column is assumed to be the dependent variable (‘HPI’), and the subsequent columns are potential exogenous variables.</p>
</dd>
<dt>train_cut<span class="classifier">float or str or datetime-like</span></dt><dd><p>The cutoff point for splitting the data into training and validation sets. Can be a float between 0 and 1 representing the proportion of the data to use for training, or a specific index value.</p>
</dd>
<dt>h_list<span class="classifier">list of int, optional</span></dt><dd><p>A list of forecast horizons (e.g., [1, 3, 6, 12]) to evaluate. Default is [1, 3, 6, 12].</p>
</dd>
<dt>seasonal<span class="classifier">bool, optional</span></dt><dd><p>Whether to include seasonal dummies (monthly) in the model. Default is False.</p>
</dd>
<dt>max_lag<span class="classifier">int, optional</span></dt><dd><p>The maximum lag order to consider for selection. Default is 3.</p>
</dd>
<dt>lag_select<span class="classifier">{‘IC’, ‘CV’}, optional</span></dt><dd><p>The metric used to select the optimal lags:
- ‘IC’: Information criterion (e.g., BIC).
- ‘CV’: Cross-validation score. Default is ‘IC’.</p>
</dd>
<dt>seed<span class="classifier">int, optional</span></dt><dd><p>Random seed for reproducibility in cross-validation. Default is None.</p>
</dd>
<dt>lag_fit_intercept<span class="classifier">bool, optional</span></dt><dd><p>Whether to include an intercept in the lag selection linear regression model. Default is True.</p>
</dd>
<dt>lag_cv<span class="classifier">int, optional</span></dt><dd><p>Number of folds for cross-validation during lag selection. Default is 5.</p>
</dd>
<dt>lag_shuffle<span class="classifier">bool, optional</span></dt><dd><p>Whether to shuffle the data before splitting into batches for cross-validation during lag selection. Default is False.</p>
</dd>
<dt>lag_iter<span class="classifier">int, optional</span></dt><dd><p>Number of iterations for cross-validation during lag selection when <cite>lag_shuffle</cite> is True. Default is 20.</p>
</dd>
<dt>hsi_CV_select<span class="classifier">bool, optional</span></dt><dd><p>Whether to perform cross-validation for the selection of the UHSI (Unified Housing Sentiment Index) based on the selected lags. Default is False.</p>
</dd>
<dt>hsi_fit_intercept<span class="classifier">bool, optional</span></dt><dd><p>Whether to include an intercept in the UHSI selection linear regression model. Default is True.</p>
</dd>
<dt>hsi_cv<span class="classifier">int, optional</span></dt><dd><p>Number of folds for cross-validation during UHSI selection. Default is 4.</p>
</dd>
<dt>hsi_iter<span class="classifier">int, optional</span></dt><dd><p>Number of iterations for cross-validation during UHSI selection when <cite>hsi_CV_select</cite> is True. Default is 40.</p>
</dd>
<dt>y_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the dependent variable (‘HPI’):
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>exog_lags<span class="classifier">{‘Auto’, ‘glob’, list of int}, optional</span></dt><dd><p>The lags to consider for the exogenous variables, if applicable:
- ‘Auto’: Automatically generate lag sequences up to <cite>max_lag</cite>.
- ‘glob’: Generates all possible combinations of lags up to <cite>max_lag</cite>.
- list of int: Use the specified lags directly. Default is ‘Auto’.</p>
</dd>
<dt>var_order<span class="classifier">{‘cross’, ‘nested’}, optional</span></dt><dd><p>The order in which lag selection is performed:
- ‘cross’: Cross all combinations of lags for ‘y’ and ‘exog’.
- ‘nested’: Select the best lags for ‘y’ first, then choose the best lags for ‘exog’ based on the selected ‘y’ lags. Default is ‘cross’.</p>
</dd>
<dt>verbose<span class="classifier">bool, optional</span></dt><dd><p>If True, print detailed output during the function execution. Default is False.</p>
</dd>
<dt>log<span class="classifier">bool, optional</span></dt><dd><p>If True, the data is assumed to be log-transformed and predictions will be back-transformed. Default is False.</p>
</dd>
<dt>original_hpi<span class="classifier">pandas.Series, optional</span></dt><dd><p>Original HPI (Housing Price Index) values for back-transforming predictions. Only used if <cite>original_scale</cite> is True. Default is None.</p>
</dd>
<dt>original_scale<span class="classifier">bool, optional</span></dt><dd><p>Whether to return the predictions on the original scale (before any transformations). Default is True.</p>
</dd>
<dt>sort_df<span class="classifier">{‘criteria’, ‘MAFE’, ‘MSFE’}, optional</span></dt><dd><p>Criteria to sort the results by:
- ‘criteria’: Sort by the lag selection criteria (e.g., IC or CV).
- ‘MAFE’: Sort by Mean Absolute Forecast Error.
- ‘MSFE’: Sort by Mean Squared Forecast Error. Default is ‘criteria’.</p>
</dd>
<dt>sort_col<span class="classifier">int, optional</span></dt><dd><p>The column index in <cite>sort_df</cite> to use for sorting. Default is -1 (last column).</p>
</dd>
</dl>
</section>
<section id="id14">
<h2>Returns<a class="headerlink" href="#id14" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>MAFE_val_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the Mean Absolute Forecast Error (MAFE) on the validation set for each exogenous variable and forecast horizon.</p>
</dd>
<dt>MAFE_val_df_improve<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the percentage improvement in MAFE on the validation set for each exogenous variable compared to the baseline (no exogenous variables).</p>
</dd>
<dt>MSFE_val_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the Mean Squared Forecast Error (MSFE) on the validation set for each exogenous variable and forecast horizon.</p>
</dd>
<dt>MSFE_val_df_improve<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the percentage improvement in MSFE on the validation set for each exogenous variable compared to the baseline.</p>
</dd>
<dt>criteria_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the lag selection criteria (e.g., IC or CV) values for each exogenous variable and forecast horizon.</p>
</dd>
<dt>lags_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the selected lags for the dependent variable (‘HPI’) and each exogenous variable.</p>
</dd>
<dt>MAFE_train_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the Mean Absolute Forecast Error (MAFE) on the training set for each exogenous variable and forecast horizon.</p>
</dd>
<dt>MSFE_train_df<span class="classifier">pandas.DataFrame</span></dt><dd><p>DataFrame containing the Mean Squared Forecast Error (MSFE) on the training set for each exogenous variable and forecast horizon.</p>
</dd>
<dt>forecast_dict<span class="classifier">dict</span></dt><dd><p>A dictionary where each key is a forecast horizon (from <cite>h_list</cite>) and the corresponding value is a DataFrame containing the actual vs. predicted values for each exogenous variable.</p>
</dd>
<dt>df<span class="classifier">pandas.DataFrame</span></dt><dd><p>The modified input DataFrame with additional columns for principal components (UHSI) if <cite>hsi_CV_select</cite> is True.</p>
</dd>
</dl>
</section>
<section id="id15">
<h2>Examples<a class="headerlink" href="#id15" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MAFE_val_df</span><span class="p">,</span> <span class="n">MAFE_val_df_improve</span><span class="p">,</span> <span class="n">MSFE_val_df</span><span class="p">,</span> <span class="n">MSFE_val_df_improve</span><span class="p">,</span> <span class="n">criteria_df</span><span class="p">,</span> <span class="n">lags_df</span><span class="p">,</span> <span class="n">MAFE_train_df</span><span class="p">,</span> <span class="n">MSFE_train_df</span><span class="p">,</span> <span class="n">forecast_dict</span><span class="p">,</span> <span class="n">df</span> <span class="o">=</span> <span class="n">compare_exog</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;2023-01-01&#39;</span><span class="p">,</span> <span class="n">h_list</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="n">lag_select</span><span class="o">=</span><span class="s1">&#39;IC&#39;</span><span class="p">,</span> <span class="n">seasonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">MAFE_val_df</span><span class="p">)</span>
<span class="go">Horizon 1  Horizon 6  Horizon 12</span>
<span class="go">exog_var1    0.03      0.04       0.05</span>
<span class="go">exog_var2    0.02      0.03       0.04</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.HLN_MDM">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">HLN_MDM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#HLN_MDM"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.HLN_MDM" title="Link to this definition"></a></dt>
<dd><p>Compute the Harvey, Leybourne, and Newbold (1997) Modified Diebold-Mariano (MDM) statistic and its p-value.</p>
<section id="id16">
<h2>Parameters<a class="headerlink" href="#id16" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>d<span class="classifier">numpy.ndarray or pandas.Series</span></dt><dd><p>The array or series of forecast error differentials. This represents the difference between the forecast errors of two competing models.</p>
</dd>
<dt>h<span class="classifier">int</span></dt><dd><p>The forecast horizon (number of steps ahead).</p>
</dd>
</dl>
</section>
<section id="id17">
<h2>Returns<a class="headerlink" href="#id17" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>MDM<span class="classifier">float</span></dt><dd><p>The Modified Diebold-Mariano statistic.</p>
</dd>
<dt>pval<span class="classifier">float</span></dt><dd><p>The p-value associated with the MDM statistic, under the null hypothesis that the forecast accuracy of the two models is the same.</p>
</dd>
</dl>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The Harvey, Leybourne, and Newbold (1997) test modifies the Diebold-Mariano test to account for small-sample bias, especially when the forecast horizon is greater than one.</p></li>
<li><p>This test is particularly useful in comparing predictive accuracy when forecasts are based on overlapping data.</p></li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<p>Harvey, D. I., Leybourne, S. J., &amp; Newbold, P. (1997). 
Testing the equality of prediction mean squared errors. 
International Journal of Forecasting, 13(2), 281-291.</p>
</section>
<section id="id18">
<h2>Examples<a class="headerlink" href="#id18" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MDM</span><span class="p">,</span> <span class="n">pval</span> <span class="o">=</span> <span class="n">HLN_MDM</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MDM Statistic: </span><span class="si">{</span><span class="n">MDM</span><span class="si">}</span><span class="s2">, p-value: </span><span class="si">{</span><span class="n">pval</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">MDM Statistic: 1.414213562373095, p-value: 0.1826592511440174</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.forecast_table">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">forecast_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#forecast_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.forecast_table" title="Link to this definition"></a></dt>
<dd><p>Generate a table comparing forecast performance across different predictors and horizons.</p>
<p>This table includes the Mean Absolute Forecast Error (MAFE), Mean Squared Forecast Error (MSFE),
and p-values for hypothesis tests related to equal predictive accuracy and forecast encompassing.</p>
<section id="hypotheses">
<h2>Hypotheses:<a class="headerlink" href="#hypotheses" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>H_{0,1}: Equal MAFE between the predictor model and the base model.</p></li>
<li><p>H_{0,2}: Equal MSFE between the predictor model and the base model.</p></li>
<li><p>H_{0,3}: The predictor model forecast encompasses the base model.</p></li>
</ul>
</section>
<section id="id19">
<h2>Returns<a class="headerlink" href="#id19" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>result<span class="classifier">pandas.DataFrame</span></dt><dd><p>A DataFrame with a MultiIndex of forecast horizons (<cite>h</cite>) and predictors, and columns including:
- ‘HPI lags’: The lags of the dependent variable (HPI).
- ‘Exog lags’: The lags of the exogenous variable.
- ‘MAFE’: The Mean Absolute Forecast Error for the predictor.
- ‘MSFE’: The Mean Squared Forecast Error for the predictor.
- ‘MAFE improvement’: The percentage improvement in MAFE relative to the base model.
- ‘MSFE improvement’: The percentage improvement in MSFE relative to the base model.
- ‘H_{0,1}’: The p-value for the hypothesis test of equal MAFE (using the Modified Diebold-Mariano test).
- ‘H_{0,2}’: The p-value for the hypothesis test of equal MSFE (using the Modified Diebold-Mariano test).
- ‘H_{0,3}’: The p-value for the hypothesis test of forecast encompassing (using the Modified Diebold-Mariano test).</p>
</dd>
</dl>
</section>
<section id="id20">
<h2>Notes<a class="headerlink" href="#id20" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The base model is represented by the ‘None’ predictor.</p></li>
<li><p>Forecast encompassing tests whether the predictor model contains all the information in the base model.</p></li>
<li><p>The method uses the Harvey, Leybourne, and Newbold (1997) Modified Diebold-Mariano test to compute p-values.</p></li>
</ul>
</section>
<section id="id21">
<h2>Examples<a class="headerlink" href="#id21" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">forecast_table</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
<span class="go">                HPI lags Exog lags     MAFE     MSFE MAFE improvement MSFE improvement   H_{0,1}   H_{0,2}   H_{0,3}</span>
<span class="go">h    Predictors                                                                                                      </span>
<span class="go">1    None              ...       ...  0.0251  0.00123            0.000            0.000  0.0321    0.0287    0.1025</span>
<span class="go">    UHSI_1            ...       ...  0.0223  0.00110            0.111            0.105  0.2103    0.1325    0.0923</span>
<span class="go">    UHSI_3            ...       ...  0.0210  0.00105            0.162            0.147  0.1809    0.1014    0.0534</span>
<span class="go">...</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="forecast_functions.results">
<span class="sig-prename descclassname"><span class="pre">forecast_functions.</span></span><span class="sig-name descname"><span class="pre">results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">results_table</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MAFE_val_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MAFE_val_df_improve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MSFE_val_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MSFE_val_df_improve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_criteria_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lags_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MAFE_train_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MSFE_train_df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecast_functions.html#results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#forecast_functions.results" title="Link to this definition"></a></dt>
<dd><p>Display selected result tables generated during the forecasting process.</p>
<section id="id22">
<h2>Parameters<a class="headerlink" href="#id22" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>results_table<span class="classifier">bool, optional</span></dt><dd><p>If True, display the full results table from the forecast comparison (default is False).</p>
</dd>
<dt>MAFE_val_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the Mean Absolute Forecast Error (MAFE) validation DataFrame (default is False).</p>
</dd>
<dt>MAFE_val_df_improve<span class="classifier">bool, optional</span></dt><dd><p>If True, display the percentage improvement in MAFE for each predictor (default is False).</p>
</dd>
<dt>MSFE_val_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the Mean Squared Forecast Error (MSFE) validation DataFrame (default is False).</p>
</dd>
<dt>MSFE_val_df_improve<span class="classifier">bool, optional</span></dt><dd><p>If True, display the percentage improvement in MSFE for each predictor (default is False).</p>
</dd>
<dt>forecast_criteria_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the forecast criteria DataFrame, showing the selected model criteria (default is False).</p>
</dd>
<dt>lags_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the DataFrame containing the selected lags for each model (default is False).</p>
</dd>
<dt>MAFE_train_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the Mean Absolute Forecast Error (MAFE) training DataFrame (default is False).</p>
</dd>
<dt>MSFE_train_df<span class="classifier">bool, optional</span></dt><dd><p>If True, display the Mean Squared Forecast Error (MSFE) training DataFrame (default is False).</p>
</dd>
<dt>head<span class="classifier">int or bool, optional</span></dt><dd><p>Number of rows to display from each DataFrame (default is 10). 
If True, display all rows of each DataFrame.</p>
</dd>
</dl>
</section>
<section id="id23">
<h2>Returns<a class="headerlink" href="#id23" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>None</dt><dd><p>Displays the selected DataFrames in the Jupyter Notebook environment.</p>
</dd>
</dl>
</section>
<section id="id24">
<h2>Notes<a class="headerlink" href="#id24" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The method allows selective display of any of the key result tables generated during the model comparison process.</p></li>
<li><p>It uses the <cite>display</cite> function from IPython to show the DataFrames.</p></li>
</ul>
</section>
<section id="id25">
<h2>Examples<a class="headerlink" href="#id25" title="Link to this heading"></a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="p">(</span><span class="n">results_table</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">MAFE_val_df</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">    Displays the results table and the MAFE validation DataFrame with the top 5 rows.</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bubble_indicators.html" class="btn btn-neutral float-left" title="bubble_indicators module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="google_trends_functions.html" class="btn btn-neutral float-right" title="google_trends_functions module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Mohammad Ebrahimi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>